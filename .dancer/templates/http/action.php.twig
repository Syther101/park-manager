<?php

declare(strict_types=1);

/*
 * Copyright (c) the Contributors as noted in the AUTHORS file.
 *
 * This file is part of the Park-Manager project.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */

namespace {{ namespace }};
{% set local_name = (module_section|default(module_name))|lower %}

{% block use_statements %}
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;
{% if module_section is not empty %}
use ParkManager\Module\{{ module_name }}\Application\{{ module_section }} as Application;
{% else %}
use ParkManager\Module\{{ module_name }}\Application;
{% endif %}
{% endblock use_statements %}

class {{ action_name }}{{ module_section }}Action extends Controller
{
{% block class_content %}
    public function __invoke(Request $request, string ${{ local_name }}Id)
    {
        $service = $this->get('park_manager.{{ module_alias }}.application.{{ local_name }}.{{ action_name|lower }}');
        ${{ local_name }} = $service->execute(new Application\Service\{{ action_name }}{{ module_section|default(module_name) }}Request(${{ local_name }}Id));

        return $this->render('@ParkManager{{ module_name }}/{{ local_name }}/{{ action_name|lower }}.html.twig', [
            '{{ local_name }}' => ${{ local_name }},
        ]);
    }
{% endblock class_content %}
}
